(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{105:function(t,e,a){t.exports={container:"Resize_container__2qkyx",child:"Resize_child__1bNxU"}},183:function(t,e,a){t.exports=a(409)},192:function(t,e,a){},207:function(t,e){},209:function(t,e){},240:function(t,e){},241:function(t,e){},289:function(t,e){},291:function(t,e){},314:function(t,e){},408:function(t,e,a){},409:function(t,e,a){"use strict";a.r(e);var n=a(0),i=a.n(n),r=a(178),s=a.n(r),c=a(74),l=(a(192),a(22)),o=a(23),u=a(26),h=a(24),d=a(25),p=a(5),f=a(180),g=a.n(f),m=a(31),v=a(181),b=a.n(v),y=a(40),O=a(106),j=a(27),E={topRanked:{id:0,label:"Top Ranked",description:"This report shows you top quality pizzas you can make from the specified ingredients."},lowestRanked:{id:1,label:"Lowest Ranked",description:"This report shows you the worst pizzas you can make from the specified ingrediends."}},k=["#003f5c","#2f4b7c","#665191","#a05195","#d45087","#f95d6a","#ff7c43"],w=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_ACTIVE_GRAPH":return Object.assign({},t,{activeGraph:e.data});case"ADD_TAG":return Object.assign({},t,{activeTags:t.activeTags.concat({id:e.data,name:e.data})});case"REMOVE_TAG":return Object.assign({},t,{activeTags:[].concat(Object(O.a)(t.activeTags.slice(0,e.data)),Object(O.a)(t.activeTags.slice(e.data+1)))});case"SET_PIZZA_DATA":return Object.assign({},t,Object(j.a)({},e.data,{activeGraph:E.topRanked.id,activeTags:Object.keys(e.data.topping).map(function(t){return{id:t,name:t}}).slice(0,3),isLoading:!1}));case"SET_FILTER_ACTIVE":return Object.assign({},t,{filter:Object.assign({},t.filter,Object(y.a)({},e.data,Object(j.a)({},t.filter[e.data],{active:!0})))});case"SET_FILTER_INACTIVE":return Object.assign({},t,{filter:Object.assign({},t.filter,Object(y.a)({},e.data,Object(j.a)({},t.filter[e.data],{active:!1})))});default:return t}},A=a(37),z=function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(u.a)(this,Object(h.a)(e).call(this,t))).setAxis=a.setAxis.bind(Object(p.a)(Object(p.a)(a))),a.setRef=a.setRef.bind(Object(p.a)(Object(p.a)(a))),a.redrawData=a.redrawData.bind(Object(p.a)(Object(p.a)(a))),a.updateGraph=a.updateGraph.bind(Object(p.a)(Object(p.a)(a))),a}return Object(d.a)(e,t),Object(o.a)(e,[{key:"setRef",value:function(t){this.svg=A.f(t),this.chart=this.svg.append("g"),this.yAxis=this.chart.append("g").attr("class","axis y"),this.xAxis=this.chart.append("g").attr("class","axis x")}},{key:"componentDidMount",value:function(){this.setAxis(),this.redrawData()}},{key:"componentDidUpdate",value:function(t){this.props.data&&this.props.data.length>0&&(this.setAxis(),JSON.stringify(this.props.filters)!==JSON.stringify(t.filters)||this.props.current!==t.current||this.props.activeTags!==t.activeTags?this.redrawData():this.updateGraph())}},{key:"redrawData",value:function(){var t=this.props,e=t.filters,a=t.data;this.chart.selectAll("rect").remove(),this.chart.append("g").selectAll("g").data(A.g().keys(e.map(function(t){return t.id}))(a)).enter().append("g").attr("fill",this.setFill).selectAll("rect").data(function(t){return t}).enter().append("rect").attr("class","data").attr("width",this.setWidth).attr("height",0).attr("x",this.setX).attr("y",this.acctualHeight).transition().duration(1e3).delay(function(t,e){return 50*e}).attr("x",this.setX).attr("y",this.setY).attr("height",this.setHeight).attr("width",this.setWidth)}},{key:"updateGraph",value:function(){this.chart.selectAll("rect.data").transition().duration(0).attr("x",this.setX).attr("y",this.setY).attr("height",this.setHeight).attr("width",this.setWidth)}},{key:"setLegend",value:function(){var t=this.props.filters;this.legend&&(this.legend.selectAll("text").remove(),this.legend.remove());var e=0,a=0,n=0,i=this.acctualWidth+20;return this.legend=this.svg.append("g").attr("font-family","sans-serif").attr("font-size",11).attr("text-anchor","start").attr("text-transform","capitalize").attr("transform","translate(15,5)"),this.legend.selectAll().data(t.map(function(t){return t.id}).slice().reverse()).enter().append("g"),this.legend.selectAll("g").append("rect").attr("x",0).attr("y",0).attr("width",19).attr("height",19),this.legend.selectAll("g").append("text").attr("x",0).attr("y",0).attr("transform","translate(25, 8.5)").text(function(t){return t}),this.legend.selectAll("g").attr("transform",function(t,r){var s=a;return i<s+115&&(a=s=0,e+=25),(a+=115)>n&&(n=a),"translate("+s+","+e+")"}),{ypos:e}}},{key:"setAxis",value:function(){var t=this,e=this.props,a=e.margin,n=e.width,i=e.height,r=this.props,s=r.filters,c=r.data;this.acctualWidth=n-a/2-10;var l=this.setLegend().ypos;this.acctualHeight=i-a-l-5,this.yScale=A.e().rangeRound([this.acctualHeight,0]),this.xScale=A.d().rangeRound([0,this.acctualWidth]).paddingInner(.5).align(.1),this.xScale.domain(c.map(function(t){return t.name})),this.yScale.domain([0,A.c(c,function(t){return t.total})]),this.xAxis.attr("font-size","inherit").attr("transform","translate(0, ".concat(this.acctualHeight,")")).call(A.a(this.xScale)),this.yAxis.call(A.b(this.yScale).ticks(5)),this.setX=function(e){return t.xScale(e.data.name)},this.setY=function(e){return t.yScale(e[1])},this.setHeight=function(e){return t.yScale(e[1])<t.yScale(e[0])?t.yScale(e[0])-t.yScale(e[1]):0},this.setWidth=function(){return t.xScale.bandwidth()},this.setFill=function(t){return s.find(function(e){return e.id===t.key}).color},this.setFillLegend=function(t){return s.find(function(e){return e.id===t}).color},this.legend.selectAll("rect").attr("fill",this.setFillLegend),this.chart.attr("transform","translate(".concat(a/2,", ").concat(a/2+l+5,")"))}},{key:"render",value:function(){return i.a.createElement("svg",{width:this.props.width,height:this.props.height,ref:this.setRef})}}]),e}(n.Component);z.defaultProps={height:600,width:600,margin:60};var T=z,x=a(105),_=a.n(x),R=function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(u.a)(this,Object(h.a)(e).call(this,t))).updateDimensions=a.updateDimensions.bind(Object(p.a)(Object(p.a)(a))),a.setRef=a.setRef.bind(Object(p.a)(Object(p.a)(a))),a.state={width:0,height:0},a}return Object(d.a)(e,t),Object(o.a)(e,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.updateDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions)}},{key:"updateDimensions",value:function(t){if(this.container){var e=this.container.getBoundingClientRect();this.setState({height:e.height,width:e.width})}}},{key:"setRef",value:function(t){if(this.container=t,t){var e=this.container.getBoundingClientRect();this.setState({height:e.height,width:e.width})}}},{key:"render",value:function(){var t=this.props.children,e=this.state,a=e.width,n=e.height,r=i.a.Children.map(t,function(t){return i.a.cloneElement(t,{height:n,width:a})});return i.a.createElement("div",{className:_.a.container},i.a.createElement("div",{ref:this.setRef,className:_.a.child},r))}}]),e}(n.Component);R.defaultProps={size:600};var S=R,F=a(75),I=a.n(F),D=function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(u.a)(this,Object(h.a)(e).call(this,t))).change=a.change.bind(Object(p.a)(Object(p.a)(a))),a.changeFilters=a.changeFilters.bind(Object(p.a)(Object(p.a)(a))),a}return Object(d.a)(e,t),Object(o.a)(e,[{key:"change",value:function(t){this.props.changeGraph(Number(t.target.value))}},{key:"changeFilters",value:function(t){!0===t.target.checked?this.props.setFilterActive(t.target.name):this.props.setFilterInactive(t.target.name)}},{key:"render",value:function(){var t=this,e=this.props,a=e.data,n=e.filters,r=e.activeTags,s=e.activeFilters,c=e.isLoading,l=e.info;return i.a.createElement("div",{className:I.a.card},c&&i.a.createElement("div",{style:{textAlign:"center"}},i.a.createElement("h4",null,"Getting the data ready"),i.a.createElement("img",{style:{maxWidth:"100%"},src:"https://media.giphy.com/media/jAYUbVXgESSti/giphy.gif",alt:"super kewl gif"})),a&&0===a.length&&i.a.createElement("div",{style:{textAlign:"center"}},i.a.createElement("h4",null,"Please enter some toppings so we can compare pizzas for you"),i.a.createElement("img",{style:{maxWidth:"100%"},src:"https://media.giphy.com/media/OZpBpm7c2AGFG/giphy.gif",alt:"super kewl gif"})),a&&a.length>0&&[i.a.createElement("div",{className:I.a.header,key:"header"},i.a.createElement("div",null,i.a.createElement("h3",null,l.label),i.a.createElement("h4",null,l.description)),i.a.createElement("select",{onChange:this.change,value:l.id},i.a.createElement("option",{value:E.lowestRanked.id},E.lowestRanked.label),i.a.createElement("option",{value:E.topRanked.id},E.topRanked.label))),i.a.createElement("div",{className:I.a.filters,key:"filters"},n&&n.map(function(e){return i.a.createElement("div",{key:"checkbox-".concat(e.id)},i.a.createElement("input",{onChange:t.changeFilters,type:"checkbox",name:e.id,id:"checkbox-".concat(e.id),checked:e.active}),i.a.createElement("label",{htmlFor:"checkbox-".concat(e.id)},e.label))})),i.a.createElement(S,{key:"chart"},i.a.createElement(T,{current:l.id,filters:s,data:a,activeTags:r}))])}}]),e}(n.Component);D.defaultProps={};var G=D,C=a(63),N=a.n(C),L=function(t){function e(){return Object(l.a)(this,e),Object(u.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(o.a)(e,[{key:"render",value:function(){var t=this.props,e=t.pizza,a=t.filters;return i.a.createElement("div",{className:N.a.card},i.a.createElement("div",{className:N.a.header},i.a.createElement("div",null,i.a.createElement("h3",null,e.name),i.a.createElement("div",{className:N.a.toppings},e.toppings&&e.toppings.map(function(t){return i.a.createElement("span",{key:t},t)})))),i.a.createElement("div",{className:N.a.filters},Object.keys(e).filter(function(t){return"toppings"!==t&&"name"!==t&&"total"!==t}).map(function(t){return i.a.createElement("div",{key:t,style:{background:a.filter(function(e){return e.id===t}).map(function(t){return t.color})}},i.a.createElement("div",{style:{fontSize:"2em"}},e[t]),a.filter(function(e){return e.id===t}).map(function(t){return t.label}))})))}}]),e}(n.Component),W=function(t){return t.filter?Object.keys(t.filter).filter(function(e){return t.filter[e].active}).map(function(e){return t.filter[e]}):null},P=function(t){return t.filter?Object.keys(t.filter).map(function(e){return t.filter[e]}):null},H=function(t){return t.topping?Object.keys(t.topping).map(function(e){return Object(j.a)({},t.topping[e],{name:e})}):null},V=function(t){return t.activeTags?t.activeTags:null},M=function(t){if(!t.pizza)return null;var e=W(t),a=t.activeTags;return Object.keys(t.pizza).filter(function(e){return t.pizza[e].toppings.some(function(t){return a.find(function(e){return e.id===t})})}).map(function(a){return e.map(function(t){return t.id}).reduce(function(e,n){return e[n]=t.pizza[a][n],e.total||(e.total=0),e.total=e.total+t.pizza[a][n],e},{name:a,toppings:t.pizza[a].toppings})})},X=function(t){return 0===t.activeGraph?Z(t):B(t)},Z=function(t){return t.pizza?M(t).sort(function(t,e){return e.total-t.total}).slice(0,5):null},B=function(t){return t.pizza?M(t).sort(function(t,e){return t.total-e.total}).slice(0,5):null},U=function(t){return Object.keys(E).map(function(t){return E[t]}).find(function(e){return e.id===t.activeGraph})||{}},Y=function(t){return!1!==t.isLoading},J=new m.b.Entity("topping"),q=new m.b.Entity("filter"),K=new m.b.Entity("pizza",{},{idAttribute:"name",processStrategy:function(t){return Object(j.a)({},Object.keys(t).filter(function(t){return"toppings"!==t&&"name"!==t}).reduce(function(e,a){return Object(j.a)({},e,Object(y.a)({},a.replace(/ /gi,""),Number(t[a])))},{}),{filters:Object.keys(t).filter(function(t){return"toppings"!==t&&"name"!==t}).map(function(t,e){return{id:t.replace(/ /gi,""),label:t,name:t,order:e,color:k[e%k.length],active:!0}}),toppings:t.toppings.split(", ").map(function(t){return{label:t,id:t}})})}});K.define({toppings:new m.b.Array(J),filters:new m.b.Array(q)});var Q=new m.b.Array(K),$=(a(408),function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(u.a)(this,Object(h.a)(e).call(this,t))).showInfo=a.showInfo.bind(Object(p.a)(Object(p.a)(a))),a}return Object(d.a)(e,t),Object(o.a)(e,[{key:"componentWillMount",value:function(){this.init()}},{key:"init",value:function(){g.a.init({key:"https://docs.google.com/spreadsheets/d/1BGmcoo6Vx6EZHK8E4WfCTxaYafzHqTFRoF7X7WvU3XM/edit?usp=sharing",callback:this.showInfo,simpleSheet:!0})}},{key:"showInfo",value:function(t,e){(0,this.props.setData)(Object(m.a)(t,Q).entities)}},{key:"handleDelete",value:function(t){(0,this.props.removeTag)(t)}},{key:"handleAddition",value:function(t){(0,this.props.addTag)(t.id)}},{key:"render",value:function(){var t=this.props,e=t.data,a=t.filters,n=t.suggestions,r=t.info,s=t.changeGraph,c=t.activeFilters,l=t.activeTags,o=t.setFilterActive,u=t.setFilterInactive,h=t.isLoading;return i.a.createElement("div",{className:"app"},i.a.createElement("h1",null,"What toppings do you feel like eating?"),i.a.createElement("h4",{style:{padding:"0px 10px"}},"Type in the toppings you feel like eating today and we'll show you all pizzas that have at least one of the specified toppings on them."),i.a.createElement(b.a,{tags:l||[],suggestions:n||[],allowNew:!1,placeholder:"",handleDelete:this.handleDelete.bind(this),handleAddition:this.handleAddition.bind(this)}),i.a.createElement(G,{filters:a,activeFilters:c,activeTags:l,data:e,isLoading:h,changeGraph:s,setFilterActive:o,setFilterInactive:u,info:r}),i.a.createElement("div",{className:"pizza__container"},e&&e.map(function(t){return i.a.createElement(L,{filters:a,key:t.name,pizza:t})})))}}]),e}(n.Component)),tt=Object(c.b)(function(t){return{data:X(t),info:U(t),activeFilters:W(t),filters:P(t),suggestions:H(t),isLoading:Y(t),activeTags:V(t)}},function(t){return{setData:function(e,a){return t((n=e,{type:"SET_PIZZA_DATA",data:Object(j.a)({},n)}));var n},addTag:function(e){return t({type:"ADD_TAG",data:e})},removeTag:function(e){return t({type:"REMOVE_TAG",data:e})},setFilterActive:function(e){return t(function(t){return{type:"SET_FILTER_ACTIVE",data:t}}(e))},setFilterInactive:function(e){return t(function(t){return{type:"SET_FILTER_INACTIVE",data:t}}(e))},changeGraph:function(e){return t({type:"SET_ACTIVE_GRAPH",data:e})}}})($),et=a(47),at=a(182);var nt=function(t){var e=[at.a],a=[et.a.apply(void 0,e)],n=et.c;return Object(et.d)(w,t,n.apply(void 0,a))}({});s.a.render(i.a.createElement(c.a,{store:nt},i.a.createElement(tt,null)),document.getElementById("root"))},63:function(t,e,a){t.exports={card:"PizzaCard_card__1BmPn",toppings:"PizzaCard_toppings__3lhMb",filters:"PizzaCard_filters__2IdD3"}},75:function(t,e,a){t.exports={card:"Widget_card__umzyw",filters:"Widget_filters__2ZFzk",header:"Widget_header__3OPIk"}}},[[183,1,2]]]);
//# sourceMappingURL=main.34a66e62.chunk.js.map